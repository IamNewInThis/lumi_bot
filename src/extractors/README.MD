# Extractors

Esta carpeta contiene los extractores de informaci贸n del sistema Lumi. Los extractores son componentes especializados que analizan texto y activan funcionalidades espec铆ficas.

## Prop贸sito

Los extractores procesan mensajes de los usuarios para identificar y extraer informaci贸n relevante que puede ser utilizada para:
- Mantener perfiles de bebes actualizados

## Extractores Disponibles

### profile_extractor.py

Extrae informaci贸n del perfil del beb茅 a partir de mensajes de los usuarios. Identifica autom谩ticamente:

- **Lugar de sue帽o**: Donde duerme el beb茅 (cuna, cama con los padres, mois茅s, etc.)
- **M茅todo de alimentaci贸n**: Tipo de alimentaci贸n (lactancia materna, f贸rmula, mixta)
- **Temperamento**: Caracter铆sticas del comportamiento del beb茅 (tranquilo, activo, sensible)

#### Caracter铆sticas:
- **Multiidioma**: Soporta espa帽ol, ingl茅s y portugu茅s
- **Modo dual**: 
  - Utiliza LLM (GPT-4o-mini) cuando hay API key disponible para mayor precisi贸n
  - Modo de respaldo con heur铆sticas basadas en palabras clave cuando no hay API key
- **Normalizaci贸n de texto**: Maneja tildes y variaciones en may煤sculas/min煤sculas
- **Confianza**: Proporciona un nivel de confianza en la extracci贸n (cuando usa LLM)

#### Uso:
```python
from extractors.profile_extractor import extract_profile_info

profile = extract_profile_info("Mi beb茅 duerme en su cuna y toma pecho")
# Retorna: BabyProfile(sleep_location="cuna/crib", feeding_method="lactancia materna", ...)
```

### knowledge_extractor.py

 **En desarrollo**: Este extractor tendr谩 funcionalidad en el futuro para extraer y procesar conocimiento espec铆fico del dominio.

## Estructura de Datos

Los extractores utilizan modelos Pydantic para garantizar la consistencia y validaci贸n de los datos extra铆dos. Esto permite:
- Validaci贸n autom谩tica de tipos
- Serializaci贸n/deserializaci贸n consistente
- Documentaci贸n clara de los campos esperados

## Configuraci贸n

Los extractores pueden configurarse a trav茅s de variables de entorno:
- `OPENAI_API_KEY`: Para habilitar el modo LLM en profile_extractor
- `OPENAI_MODEL`: Modelo a utilizar (por defecto: gpt-4o-mini)